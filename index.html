<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="í•™ì›ê°€ì - ìŠ¤ë§ˆíŠ¸ í•™ì› ê´€ë¦¬ ì•±">
    <meta name="theme-color" content="#BA68C8">
    <title>í•™ì›ê°€ì - ìŠ¤ë§ˆíŠ¸ í•™ì› ê´€ë¦¬</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="í•™ì›ê°€ì">
    
    <style>
        @import url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff') format('woff');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'GmarketSansMedium', -apple-system, sans-serif;
            background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            background: white;
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(186, 104, 200, 0.2);
        }

        /* ì˜¨ë³´ë”© ìŠ¤í¬ë¦° */
        .onboarding-screen {
            display: none;
            min-height: 100vh;
            padding: 40px 20px;
            text-align: center;
        }

        .onboarding-screen.active {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .onboarding-icon {
            width: 120px;
            height: 120px;
            margin-bottom: 30px;
        }

        .onboarding-title {
            font-size: 28px;
            color: #BA68C8;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .onboarding-subtitle {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 40px;
        }

        .onboarding-input {
            width: 100%;
            max-width: 300px;
            padding: 18px;
            border: 2px solid #E1BEE7;
            border-radius: 15px;
            font-size: 18px;
            font-family: 'GmarketSansMedium', sans-serif;
            text-align: center;
            margin-bottom: 20px;
        }

        .onboarding-input:focus {
            outline: none;
            border-color: #BA68C8;
        }

        .onboarding-btn {
            padding: 18px 50px;
            background: linear-gradient(135deg, #BA68C8 0%, #CE93D8 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-family: 'GmarketSansMedium', sans-serif;
            cursor: pointer;
            margin: 10px;
        }

        .onboarding-btn-secondary {
            background: white;
            color: #BA68C8;
            border: 2px solid #BA68C8;
        }

        .child-list-onboarding {
            max-width: 300px;
            margin: 20px 0;
        }

        .child-item-onboarding {
            background: #F3E5F5;
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .child-name-display {
            font-size: 18px;
            color: #BA68C8;
        }

        .remove-child-btn {
            background: transparent;
            border: none;
            color: #999;
            font-size: 20px;
            cursor: pointer;
        }

        /* í—¤ë” */
        .header {
            background: linear-gradient(135deg, #BA68C8 0%, #CE93D8 100%);
            padding: 30px 20px 20px;
            color: white;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 45px;
            height: 45px;
        }

        .logo-text {
            font-size: 28px;
            font-weight: bold;
            letter-spacing: -0.5px;
        }

        .child-selector {
            position: relative;
            display: inline-block;
        }

        .child-selector-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 16px;
            font-family: 'GmarketSansMedium', sans-serif;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .child-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 10px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-width: 200px;
            z-index: 100;
        }

        .child-dropdown.active {
            display: block;
        }

        .child-dropdown-item {
            padding: 15px 20px;
            color: #333;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
        }

        .child-dropdown-item:first-child {
            border-radius: 15px 15px 0 0;
        }

        .child-dropdown-item:last-child {
            border-bottom: none;
            border-radius: 0 0 15px 15px;
        }

        .child-dropdown-item:hover {
            background: #F3E5F5;
        }

        .child-dropdown-item.active {
            background: #BA68C8;
            color: white;
        }

        .child-dropdown-item.add-child {
            color: #BA68C8;
            font-weight: bold;
        }

        .user-greeting {
            font-size: 16px;
            opacity: 0.95;
            margin-top: 5px;
        }

        .tabs {
            display: flex;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 5px;
            margin-top: 20px;
        }

        .tab {
            flex: 1;
            padding: 12px 8px;
            border: none;
            background: transparent;
            color: white;
            font-size: 14px;
            font-family: 'GmarketSansMedium', sans-serif;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab.active {
            background: white;
            color: #BA68C8;
            font-weight: bold;
        }

        .content {
            padding: 25px 20px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #F3E5F5 0%, #FCE4EC 100%);
            padding: 20px 15px;
            border-radius: 20px;
            text-align: center;
        }

        .stat-icon {
            width: 35px;
            height: 35px;
            margin: 0 auto 8px;
        }

        .stat-value {
            font-size: 24px;
            color: #BA68C8;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: #888;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .section-title {
            font-size: 18px;
            color: #333;
            font-weight: bold;
        }

        .academy-list, .reward-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .academy-card, .reward-item {
            background: white;
            border: 2px solid #E1BEE7;
            border-radius: 20px;
            padding: 20px;
            transition: all 0.3s;
        }

        .academy-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(186, 104, 200, 0.15);
        }

        .academy-name, .reward-name {
            font-size: 18px;
            color: #BA68C8;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .academy-time {
            font-size: 15px;
            color: #666;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .academy-days {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .day-badge {
            padding: 5px 10px;
            background: #F3E5F5;
            color: #BA68C8;
            border-radius: 8px;
            font-size: 12px;
        }

        .day-badge.active {
            background: #BA68C8;
            color: white;
        }

        .weather-badges {
            display: flex;
            gap: 5px;
            margin-top: 8px;
        }

        .weather-badge {
            padding: 4px 8px;
            background: #E3F2FD;
            color: #1976D2;
            border-radius: 6px;
            font-size: 11px;
        }

        .reward-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .reward-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .reward-icon {
            width: 40px;
            height: 40px;
        }

        .reward-cost {
            font-size: 13px;
            color: #BA68C8;
            font-weight: bold;
        }

        .reward-status {
            padding: 6px 12px;
            border-radius: 10px;
            font-size: 12px;
            background: #F3E5F5;
            color: #BA68C8;
        }

        .reward-status.available {
            background: #BA68C8;
            color: white;
            cursor: pointer;
        }

        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-family: 'GmarketSansMedium', sans-serif;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #BA68C8 0%, #CE93D8 100%);
            color: white;
            width: 100%;
            font-size: 17px;
            padding: 18px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(186, 104, 200, 0.3);
        }

        .btn-secondary {
            background: #F3E5F5;
            color: #BA68C8;
        }

        .points-card {
            background: linear-gradient(135deg, #BA68C8 0%, #CE93D8 100%);
            border-radius: 25px;
            padding: 30px;
            color: white;
            text-align: center;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }

        .points-card::before {
            content: 'âœ¨';
            position: absolute;
            font-size: 100px;
            opacity: 0.1;
            right: -20px;
            top: -20px;
        }

        .points-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .points-value {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .points-subtitle {
            font-size: 13px;
            opacity: 0.85;
        }

        .schedule-card {
            background: white;
            border: 2px solid #E1BEE7;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }

        .schedule-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(180deg, #BA68C8 0%, #CE93D8 100%);
        }

        .schedule-time {
            font-size: 28px;
            color: #BA68C8;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .schedule-academy {
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
        }

        .schedule-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .time-remaining {
            font-size: 13px;
            color: #888;
        }

        .badge {
            padding: 6px 12px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
        }

        .badge-waiting {
            background: #FFF3E0;
            color: #F57C00;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #888;
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 25px;
            padding: 30px;
            max-width: 450px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: 22px;
            color: #BA68C8;
            font-weight: bold;
            margin-bottom: 25px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 14px;
            border: 2px solid #E1BEE7;
            border-radius: 12px;
            font-size: 15px;
            font-family: 'GmarketSansMedium', sans-serif;
            transition: border-color 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #BA68C8;
        }

        .days-selector {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .day-option {
            flex: 1;
            min-width: 45px;
            padding: 12px 8px;
            border: 2px solid #E1BEE7;
            background: white;
            color: #BA68C8;
            border-radius: 12px;
            font-size: 14px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }

        .day-option.selected {
            background: #BA68C8;
            color: white;
            border-color: #BA68C8;
        }

        .time-input-group {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 10px;
            align-items: center;
        }

        .time-input {
            text-align: center;
        }

        .time-separator {
            font-size: 20px;
            color: #BA68C8;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        .modal-buttons .btn {
            flex: 1;
        }

        .recording-buttons {
            display: flex;
            gap: 10px;
        }

        .recording-status {
            margin-top: 10px;
            font-size: 13px;
            color: #BA68C8;
            text-align: center;
        }

        .weather-section {
            background: #F8F9FA;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .weather-section-title {
            font-size: 16px;
            color: #333;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .weather-option {
            background: white;
            border: 2px solid #E1BEE7;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
        }

        .weather-option-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .weather-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .weather-label {
            font-size: 15px;
            color: #333;
            flex: 1;
        }

        .weather-record-section {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #E1BEE7;
            display: none;
        }

        .weather-record-section.active {
            display: block;
        }

        .divider {
            height: 1px;
            background: #E1BEE7;
            margin: 20px 0;
        }

        .hidden {
            display: none !important;
        }
    
.ui-message {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 16px;
    border-radius: 8px;
    font-size: 14px;
    z-index: 9999;
}
.ui-message.error { background:#ffeded; color:#c00; }
.ui-message.success { background:#eaffea; color:#0a7; }

</style>
</head>
<body>
    <!-- ì˜¨ë³´ë”© Screen 1: í™˜ì˜ -->
    <div class="onboarding-screen" id="onboarding1">
        <svg class="onboarding-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="20" y="30" width="60" height="50" rx="8" fill="#BA68C8"/>
            <rect x="25" y="35" width="50" height="40" rx="6" fill="#F3E5F5"/>
            <circle cx="35" cy="45" r="3" fill="#BA68C8"/>
            <circle cx="65" cy="45" r="3" fill="#BA68C8"/>
            <path d="M 40 60 Q 50 65 60 60" stroke="#BA68C8" stroke-width="3" fill="none" stroke-linecap="round"/>
            <path d="M 35 30 Q 50 20 65 30" stroke="white" stroke-width="4" fill="none" stroke-linecap="round"/>
        </svg>
        <div class="onboarding-title">í•™ì›ê°€ìì—<br>ì˜¤ì‹  ê±¸ í™˜ì˜í•´ìš”! ğŸ’</div>
        <div class="onboarding-subtitle">
            ì•„ì´ì˜ í•™ì› ì¶œì„ì„ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ê´€ë¦¬í•˜ê³ <br>
            ì‹œê°„ ì•½ì† ìŠµê´€ì„ ê¸¸ëŸ¬ë³´ì„¸ìš”
        </div>
        <button class="onboarding-btn" onclick="nextOnboarding(2)">ì‹œì‘í•˜ê¸°</button>
    </div>

    <!-- ì˜¨ë³´ë”© Screen 2: ìë…€ ë“±ë¡ -->
    <div class="onboarding-screen" id="onboarding2">
        <div class="onboarding-title">ìë…€ ì´ë¦„ì„<br>ì…ë ¥í•´ì£¼ì„¸ìš” ğŸ‘¦</div>
        <div class="onboarding-subtitle">
            í•™ì› ì¼ì •ì„ ê´€ë¦¬í•  ìë…€ì˜ ì´ë¦„ì„ ì•Œë ¤ì£¼ì„¸ìš”
        </div>
        <input type="text" class="onboarding-input" id="childNameInput" placeholder="ì˜ˆ) ë¯¼ì¤€" autofocus>
        <button class="onboarding-btn" onclick="addChildFromOnboarding()">ë‹¤ìŒ</button>
    </div>

    <!-- ì˜¨ë³´ë”© Screen 3: ì¶”ê°€ ìë…€ -->
    <div class="onboarding-screen" id="onboarding3">
        <div class="onboarding-title">âœ… ë“±ë¡ ì™„ë£Œ!</div>
        <div class="child-list-onboarding" id="childListOnboarding"></div>
        <div class="onboarding-subtitle" style="margin-bottom: 20px;">
            ë‹¤ë¥¸ ìë…€ë„ ë“±ë¡í•˜ì‹œê² ì–´ìš”?
        </div>
        <button class="onboarding-btn onboarding-btn-secondary" onclick="addAnotherChild()">+ ìë…€ ì¶”ê°€í•˜ê¸°</button>
        <button class="onboarding-btn" onclick="finishOnboarding()">ì‹œì‘í•˜ê¸°</button>
    </div>

    <!-- ì˜¨ë³´ë”© Screen 4: ì™„ë£Œ -->
    <div class="onboarding-screen" id="onboarding4">
        <svg class="onboarding-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="40" fill="#BA68C8"/>
            <path d="M 30 50 L 45 65 L 70 35" stroke="white" stroke-width="8" fill="none" stroke-linecap="round"/>
        </svg>
        <div class="onboarding-title">ëª¨ë“  ì¤€ë¹„ê°€<br>ëë‚¬ì–´ìš”! ğŸ‰</div>
        <div class="onboarding-subtitle">
            ì´ì œ í•™ì›ì„ ë“±ë¡í•˜ê³ <br>
            ìŠ¤ë§ˆíŠ¸í•œ í•™ì› ê´€ë¦¬ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”!
        </div>
        <button class="onboarding-btn" onclick="goToApp()">í•™ì› ì¶”ê°€í•˜ëŸ¬ ê°€ê¸°</button>
    </div>

    <!-- ë©”ì¸ ì•± -->
    <div class="container hidden" id="mainApp">
        <div class="header">
            <div class="logo-container">
                <svg class="logo-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <rect x="20" y="30" width="60" height="50" rx="8" fill="white"/>
                    <rect x="25" y="35" width="50" height="40" rx="6" fill="#F3E5F5"/>
                    <circle cx="35" cy="45" r="3" fill="#BA68C8"/>
                    <circle cx="65" cy="45" r="3" fill="#BA68C8"/>
                    <path d="M 40 60 Q 50 65 60 60" stroke="#BA68C8" stroke-width="3" fill="none" stroke-linecap="round"/>
                    <path d="M 35 30 Q 50 20 65 30" stroke="white" stroke-width="4" fill="none" stroke-linecap="round"/>
                </svg>
                <div>
                    <div class="logo-text">í•™ì›ê°€ì</div>
                    <div class="child-selector">
                        <button class="child-selector-btn" onclick="toggleChildDropdown()">
                            <span id="currentChildName">ğŸ‘¦ ìë…€</span>
                            <span>â–¼</span>
                        </button>
                        <div class="child-dropdown" id="childDropdown"></div>
                    </div>
                </div>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="switchTab('academy')">í•™ì›</button>
                <button class="tab" onclick="switchTab('reward')">ë³´ìƒ</button>
                <button class="tab" onclick="switchTab('child')">ì•„ì´</button>
            </div>
        </div>

        <div class="content">
            <div id="academyContent" class="tab-content active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <svg class="stat-icon" viewBox="0 0 100 100">
                            <rect x="20" y="30" width="60" height="50" rx="8" fill="#BA68C8"/>
                        </svg>
                        <div class="stat-value" id="academyCount">0</div>
                        <div class="stat-label">ë“±ë¡ í•™ì›</div>
                    </div>
                    <div class="stat-card">
                        <svg class="stat-icon" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="35" fill="#BA68C8"/>
                            <path d="M 30 50 L 45 65 L 70 35" stroke="white" stroke-width="6" fill="none"/>
                        </svg>
                        <div class="stat-value">95%</div>
                        <div class="stat-label">ì¶œì„ë¥ </div>
                    </div>
                    <div class="stat-card">
                        <svg class="stat-icon" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="35" fill="#FFC947"/>
                            <path d="M 50 25 L 57 45 L 78 45 L 61 58 L 68 78 L 50 65 L 32 78 L 39 58 L 22 45 L 43 45 Z" fill="white"/>
                        </svg>
                        <div class="stat-value" id="totalPoints">150</div>
                        <div class="stat-label">í¬ì¸íŠ¸</div>
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-title">ë“±ë¡ëœ í•™ì›</div>
                </div>

                <div class="academy-list" id="academyList"></div>

                <button class="btn btn-primary" style="margin-top: 25px;" onclick="openModal('addAcademyModal')">
                    â• í•™ì› ì¶”ê°€í•˜ê¸°
                </button>
            </div>

            <div id="rewardContent" class="tab-content">
                <div class="section-header">
                    <div class="section-title">ë³´ìƒ ëª©ë¡</div>
                </div>

                <div class="reward-list" id="rewardList"></div>

                <button class="btn btn-primary" style="margin-top: 25px;" onclick="openModal('addRewardModal')">
                    â• ë³´ìƒ ì¶”ê°€í•˜ê¸°
                </button>
            </div>

            <div id="childContent" class="tab-content">
                <div class="points-card">
                    <div class="points-label">ë‚´ê°€ ëª¨ì€ í¬ì¸íŠ¸</div>
                    <div class="points-value" id="childPoints">150P</div>
                    <div class="points-subtitle">ì¡°ê¸ˆë§Œ ë” ëª¨ìœ¼ë©´ ë³´ìƒì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”!</div>
                </div>

                <div class="section-header">
                    <div class="section-title">ì˜¤ëŠ˜ í•™ì› ì¼ì •</div>
                </div>

                <div id="todaySchedule"></div>

                <div class="section-header" style="margin-top: 30px;">
                    <div class="section-title">ë°›ì„ ìˆ˜ ìˆëŠ” ë³´ìƒ</div>
                </div>

                <div class="reward-list" id="childRewardList"></div>
            </div>
        </div>
    </div>

    <!-- í•™ì› ì¶”ê°€ ëª¨ë‹¬ -->
    <div class="modal" id="addAcademyModal">
        <div class="modal-content">
            <div class="modal-header">ìƒˆ í•™ì› ì¶”ê°€í•˜ê¸°</div>
            
            <div class="form-group">
                <label class="form-label">í•™ì› ì´ë¦„</label>
                <input type="text" class="form-input" id="academyName" placeholder="ì˜ˆ) ì˜ì–´í•™ì›">
            </div>

            <div class="form-group">
                <label class="form-label">í•™ì› ì£¼ì†Œ</label>
                <input type="text" class="form-input" id="academyAddress" placeholder="ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
            </div>

            <div class="form-group">
                <label class="form-label">ìˆ˜ì—… ìš”ì¼</label>
                <div class="days-selector" id="daysSelector">
                    <div class="day-option" data-day="ì›”" onclick="toggleDay(this)">ì›”</div>
                    <div class="day-option" data-day="í™”" onclick="toggleDay(this)">í™”</div>
                    <div class="day-option" data-day="ìˆ˜" onclick="toggleDay(this)">ìˆ˜</div>
                    <div class="day-option" data-day="ëª©" onclick="toggleDay(this)">ëª©</div>
                    <div class="day-option" data-day="ê¸ˆ" onclick="toggleDay(this)">ê¸ˆ</div>
                    <div class="day-option" data-day="í† " onclick="toggleDay(this)">í† </div>
                    <div class="day-option" data-day="ì¼" onclick="toggleDay(this)">ì¼</div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">ìˆ˜ì—… ì‹œì‘ ì‹œê°„</label>
                <div class="time-input-group">
                    <input type="number" class="form-input time-input" id="startHour" placeholder="17" min="0" max="23">
                    <span class="time-separator">:</span>
                    <input type="number" class="form-input time-input" id="startMinute" placeholder="00" min="0" max="59">
                </div>
            </div>

            <div class="divider"></div>

            <div class="form-group">
                <label class="form-label">ì•ŒëŒ ì†Œë¦¬</label>
                <select class="form-input" id="alarmType" onchange="toggleVoiceRecording()">
                    <option value="basic">ê¸°ë³¸ ì•ŒëŒìŒ</option>
                    <option value="voice">ì—„ë§ˆ ëª©ì†Œë¦¬</option>
                    <option value="both">ê¸°ë³¸ìŒ + ì—„ë§ˆ ëª©ì†Œë¦¬</option>
                </select>
            </div>

            <div class="form-group" id="voiceRecordingSection" style="display: none;">
                <label class="form-label">ê¸°ë³¸ ì•ŒëŒ ë©”ì‹œì§€ ë…¹ìŒ (10ì´ˆ ì´ë‚´)</label>
                <div class="recording-buttons">
                    <button type="button" class="btn btn-secondary" id="recordBtn" onclick="toggleRecording('basic')" style="flex: 1;">
                        ğŸ¤ ë…¹ìŒ ì‹œì‘
                    </button>
                    <button type="button" class="btn btn-secondary" id="playBtn" onclick="playRecording('basic')" style="flex: 1;" disabled>
                        â–¶ï¸ ì¬ìƒ
                    </button>
                </div>
                <div id="recordingStatus" class="recording-status"></div>
            </div>

            <div class="weather-section">
                <div class="weather-section-title">
                    ğŸŒ¤ï¸ ë‚ ì”¨ ì•Œë¦¼ (ì„ íƒì‚¬í•­)
                </div>

                <div class="weather-option">
                    <div class="weather-option-header">
                        <input type="checkbox" class="weather-checkbox" id="rainAlert" onchange="toggleWeatherRecording('rain')">
                        <label class="weather-label" for="rainAlert">â˜” ë¹„/ëˆˆ ì˜¬ ë•Œ ì•Œë¦¼</label>
                    </div>
                    <div class="weather-record-section" id="rainRecordSection">
                        <div class="recording-buttons">
                            <button type="button" class="btn btn-secondary" id="rainRecordBtn" onclick="toggleRecording('rain')" style="flex: 1;">
                                ğŸ¤ ë…¹ìŒ
                            </button>
                            <button type="button" class="btn btn-secondary" id="rainPlayBtn" onclick="playRecording('rain')" style="flex: 1;" disabled>
                                â–¶ï¸ ì¬ìƒ
                            </button>
                        </div>
                        <div id="rainRecordingStatus" class="recording-status"></div>
                    </div>
                </div>

                <div class="weather-option">
                    <div class="weather-option-header">
                        <input type="checkbox" class="weather-checkbox" id="dustAlert" onchange="toggleWeatherRecording('dust')">
                        <label class="weather-label" for="dustAlert">ğŸ˜· ë¯¸ì„¸ë¨¼ì§€ ë‚˜ì  ë•Œ ì•Œë¦¼</label>
                    </div>
                    <div class="weather-record-section" id="dustRecordSection">
                        <div class="recording-buttons">
                            <button type="button" class="btn btn-secondary" id="dustRecordBtn" onclick="toggleRecording('dust')" style="flex: 1;">
                                ğŸ¤ ë…¹ìŒ
                            </button>
                            <button type="button" class="btn btn-secondary" id="dustPlayBtn" onclick="playRecording('dust')" style="flex: 1;" disabled>
                                â–¶ï¸ ì¬ìƒ
                            </button>
                        </div>
                        <div id="dustRecordingStatus" class="recording-status"></div>
                    </div>
                </div>
            </div>

            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal('addAcademyModal')">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="addAcademy()">ì¶”ê°€í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ë³´ìƒ ì¶”ê°€ ëª¨ë‹¬ -->
    <div class="modal" id="addRewardModal">
        <div class="modal-content">
            <div class="modal-header">ìƒˆ ë³´ìƒ ì¶”ê°€í•˜ê¸°</div>
            
            <div class="form-group">
                <label class="form-label">ë³´ìƒ ì´ë¦„</label>
                <input type="text" class="form-input" id="rewardName" placeholder="ì˜ˆ) í”¼ì ë¨¹ê¸°">
            </div>

            <div class="form-group">
                <label class="form-label">í•„ìš”í•œ í¬ì¸íŠ¸</label>
                <input type="number" class="form-input" id="rewardPoints" placeholder="100" min="10">
            </div>

            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal('addRewardModal')">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="addReward()">ì¶”ê°€í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ìë…€ ì¶”ê°€ ëª¨ë‹¬ -->
    <div class="modal" id="addChildModal">
        <div class="modal-content">
            <div class="modal-header">ìë…€ ì¶”ê°€í•˜ê¸°</div>
            
            <div class="form-group">
                <label class="form-label">ìë…€ ì´ë¦„</label>
                <input type="text" class="form-input" id="newChildName" placeholder="ì˜ˆ) ë¯¼ìˆ˜">
            </div>

            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal('addChildModal')">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="confirmAddChild()">ì¶”ê°€í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        let appData = {
            children: [],
            currentChildId: null,
            rewards: [
                { name: 'í¸ì˜ì  ê°„ì‹', points: 100, color: '#FF6B9D' },
                { name: 'ê²Œì„ ì‹œê°„ 30ë¶„', points: 200, color: '#4FC3F7' }
            ],
            onboardingComplete: false
        };

        let mediaRecorder;
        let audioChunks = [];
        let recordedAudios = { basic: null, rain: null, dust: null };
        let currentRecordingType = null;
        let onboardingChildren = [];

        // ì´ˆê¸°í™”
        window.addEventListener('load', () => {
            loadData();
            
            if (appData.onboardingComplete && appData.children.length > 0) {
                showApp();
            } else {
                showOnboarding(1);
            }
            
            let deferredPrompt;
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
            });
        });

        // ë°ì´í„° ê´€ë¦¬
        function saveData() {
            localStorage.setItem('hakwonAppData', JSON.stringify(appData));
        }

        function loadData() {
            const saved = localStorage.getItem('hakwonAppData');
            if (saved) {
                appData = JSON.parse(saved);
            }
        }

        function getCurrentChild() {
            return appData.children.find(c => c.id === appData.currentChildId);
        }

        // ì˜¨ë³´ë”©
        function showOnboarding(step) {
            document.querySelectorAll('.onboarding-screen').forEach(s => s.classList.remove('active'));
            document.getElementById('onboarding' + step).classList.add('active');
            
            if (step === 3) {
                renderOnboardingChildList();
            }
        }

        function nextOnboarding(step) {
            showOnboarding(step);
        }

        function addChildFromOnboarding() {
            const name = document.getElementById('childNameInput').value.trim();
            if (!name) {
                alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            onboardingChildren.push({
                id: Date.now(),
                name: name,
                academies: [],
                points: 150,
                attendance: 95
            });
            
            document.getElementById('childNameInput').value = '';
            showOnboarding(3);
        }

        function renderOnboardingChildList() {
            const list = document.getElementById('childListOnboarding');
            list.innerHTML = onboardingChildren.map((child, index) => `
                <div class="child-item-onboarding">
                    <span class="child-name-display">ğŸ‘¦ ${child.name}</span>
                    <button class="remove-child-btn" onclick="removeOnboardingChild(${index})">Ã—</button>
                </div>
            `).join('');
        }

        function removeOnboardingChild(index) {
            onboardingChildren.splice(index, 1);
            renderOnboardingChildList();
        }

        function addAnotherChild() {
            showOnboarding(2);
        }

        function finishOnboarding() {
            if (onboardingChildren.length === 0) {
                alert('ìµœì†Œ 1ëª…ì˜ ìë…€ë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            appData.children = onboardingChildren;
            appData.currentChildId = appData.children[0].id;
            appData.onboardingComplete = true;
            saveData();
            
            showOnboarding(4);
        }

        function goToApp() {
            showApp();
        }

        function showApp() {
            document.querySelectorAll('.onboarding-screen').forEach(s => s.classList.remove('active'));
            document.getElementById('mainApp').classList.remove('hidden');
            
            updateChildSelector();
            renderAcademies();
            renderRewards();
            updateStats();
            renderChildView();
        }

        // ìë…€ ì„ íƒ
        function updateChildSelector() {
            const child = getCurrentChild();
            if (child) {
                document.getElementById('currentChildName').textContent = 'ğŸ‘¦ ' + child.name;
            }
            
            renderChildDropdown();
        }

        function renderChildDropdown() {
            const dropdown = document.getElementById('childDropdown');
            dropdown.innerHTML = appData.children.map(child => `
                <div class="child-dropdown-item ${child.id === appData.currentChildId ? 'active' : ''}" 
                     onclick="selectChild(${child.id})">
                    ğŸ‘¦ ${child.name}
                </div>
            `).join('') + `
                <div class="child-dropdown-item add-child" onclick="openAddChildModal()">
                    + ìë…€ ì¶”ê°€í•˜ê¸°
                </div>
            `;
        }

        function toggleChildDropdown() {
            document.getElementById('childDropdown').classList.toggle('active');
        }

        function selectChild(childId) {
            appData.currentChildId = childId;
            saveData();
            
            updateChildSelector();
            renderAcademies();
            updateStats();
            renderChildView();
            
            document.getElementById('childDropdown').classList.remove('active');
        }

        function openAddChildModal() {
            document.getElementById('childDropdown').classList.remove('active');
            openModal('addChildModal');
        }

        function confirmAddChild() {
            const name = document.getElementById('newChildName').value.trim();
            if (!name) {
                alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            appData.children.push({
                id: Date.now(),
                name: name,
                academies: [],
                points: 150,
                attendance: 95
            });
            
            saveData();
            updateChildSelector();
            closeModal('addChildModal');
            
            document.getElementById('newChildName').value = '';
        }

        // í•™ì› ê´€ë¦¬
        function renderAcademies() {
            const child = getCurrentChild();
            const list = document.getElementById('academyList');
            
            if (!child || child.academies.length === 0) {
                list.innerHTML = `
                    <div class="empty-state">
                        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <rect x="20" y="30" width="60" height="50" rx="8" fill="#E1BEE7"/>
                        </svg>
                        <p>ì•„ì§ ë“±ë¡ëœ í•™ì›ì´ ì—†ì–´ìš”<br>í•™ì›ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>
                    </div>
                `;
                return;
            }
            
            list.innerHTML = child.academies.map(academy => {
                let weatherBadges = '';
                if (academy.weatherAlerts) {
                    if (academy.weatherAlerts.rain) weatherBadges += '<span class="weather-badge">â˜” ë¹„ ì•Œë¦¼</span>';
                    if (academy.weatherAlerts.dust) weatherBadges += '<span class="weather-badge">ğŸ˜· ë¯¸ì„¸ë¨¼ì§€ ì•Œë¦¼</span>';
                }
                
                return `
                    <div class="academy-card">
                        <div class="academy-name">${academy.name}</div>
                        <div class="academy-time">â° ${academy.time}</div>
                        <div class="academy-days">
                            ${academy.days.map(day => `<span class="day-badge active">${day}</span>`).join('')}
                        </div>
                        ${weatherBadges ? `<div class="weather-badges">${weatherBadges}</div>` : ''}
                    </div>
                `;
            }).join('');
        }

        function addAcademy() {
            const child = getCurrentChild();
            if (!child) return;
            
            const name = document.getElementById('academyName').value.trim();
            const address = document.getElementById('academyAddress').value;
            const hour = document.getElementById('startHour').value;
            const minute = document.getElementById('startMinute').value;
            const selectedDays = Array.from(document.querySelectorAll('.day-option.selected')).map(d => d.getAttribute('data-day'));
            
            if (!name || hour === '' || minute === '' || selectedDays.length === 0) {
                alert('í•™ì› ì´ë¦„, ì‹œê°„, ìš”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤!');
                return;
            }
            
            const time = `${hour.padStart(2, '0')}:${minute.padStart(2, '0')}`;
            
            const weatherAlerts = {
                rain: document.getElementById('rainAlert').checked,
                dust: document.getElementById('dustAlert').checked
            };
            
            child.academies.push({
                name,
                address,
                time,
                days: selectedDays,
                alarmType: document.getElementById('alarmType').value,
                weatherAlerts
            });
            
            saveData();
            renderAcademies();
            updateStats();
            renderChildView();
            closeModal('addAcademyModal');
            
            alert('í•™ì›ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! âœ…');
        }

        // ë³´ìƒ ê´€ë¦¬
        function renderRewards() {
            const child = getCurrentChild();
            const list = document.getElementById('rewardList');
            const childList = document.getElementById('childRewardList');
            const currentPoints = child ? child.points : 150;
            
            if (appData.rewards.length === 0) {
                const emptyHTML = `
                    <div class="empty-state">
                        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <rect x="25" y="45" width="50" height="35" rx="5" fill="#E1BEE7"/>
                        </svg>
                        <p>ì•„ì§ ë“±ë¡ëœ ë³´ìƒì´ ì—†ì–´ìš”<br>ë³´ìƒì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>
                    </div>
                `;
                list.innerHTML = emptyHTML;
                childList.innerHTML = emptyHTML;
                return;
            }
            
            list.innerHTML = appData.rewards.map((reward, index) => `
                <div class="reward-item">
                    <div class="reward-info">
                        <svg class="reward-icon" viewBox="0 0 100 100">
                            <rect x="25" y="45" width="50" height="35" rx="5" fill="${reward.color}"/>
                        </svg>
                        <div>
                            <div class="reward-name">${reward.name}</div>
                            <div class="reward-cost">${reward.points}P</div>
                        </div>
                    </div>
                    <button class="btn btn-secondary" style="padding: 8px 16px; font-size: 14px;" onclick="deleteReward(${index})">ì‚­ì œ</button>
                </div>
            `).join('');
            
            childList.innerHTML = appData.rewards.map((reward, index) => {
                const canClaim = currentPoints >= reward.points;
                const shortage = canClaim ? 0 : reward.points - currentPoints;
                
                return `
                    <div class="reward-item">
                        <div class="reward-info">
                            <svg class="reward-icon" viewBox="0 0 100 100">
                                <rect x="25" y="45" width="50" height="35" rx="5" fill="${reward.color}"/>
                            </svg>
                            <div>
                                <div class="reward-name">${reward.name}</div>
                                <div class="reward-cost">${reward.points}P í•„ìš”</div>
                            </div>
                        </div>
                        <div class="reward-status ${canClaim ? 'available' : ''}" onclick="${canClaim ? `claimReward(${index})` : ''}">
                            ${canClaim ? 'ë°›ê¸°' : shortage + 'P ë¶€ì¡±'}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function addReward() {
            const name = document.getElementById('rewardName').value;
            const points = parseInt(document.getElementById('rewardPoints').value);
            
            if (!name || !points) {
                alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const colors = ['#FF6B9D', '#4FC3F7', '#FFC947', '#BA68C8', '#66BB6A'];
            const color = colors[appData.rewards.length % colors.length];
            
            appData.rewards.push({ name, points, color });
            saveData();
            renderRewards();
            closeModal('addRewardModal');
        }

        function deleteReward(index) {
            if (confirm('ì´ ë³´ìƒì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                appData.rewards.splice(index, 1);
                saveData();
                renderRewards();
            }
        }

        function claimReward(index) {
            alert(`ì¶•í•˜í•©ë‹ˆë‹¤! "${appData.rewards[index].name}" ë³´ìƒì„ ë°›ì•˜ì–´ìš”! ğŸ‰`);
        }

        // í†µê³„
        function updateStats() {
            const child = getCurrentChild();
            if (child) {
                document.getElementById('academyCount').textContent = child.academies.length;
                document.getElementById('totalPoints').textContent = child.points;
            }
        }

        // ìë…€ í™”ë©´
        function renderChildView() {
            const child = getCurrentChild();
            const scheduleDiv = document.getElementById('todaySchedule');
            const pointsDiv = document.getElementById('childPoints');
            
            if (child) {
                pointsDiv.textContent = child.points + 'P';
                
                const today = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '][new Date().getDay()];
                const todayAcademies = child.academies.filter(a => a.days.includes(today));
                
                if (todayAcademies.length === 0) {
                    scheduleDiv.innerHTML = `
                        <div class="empty-state">
                            <p>ğŸ‰ ì˜¤ëŠ˜ì€ í•™ì›ì´ ì—†ëŠ” ë‚ ì´ì—ìš”!</p>
                        </div>
                    `;
                    return;
                }
                
                scheduleDiv.innerHTML = todayAcademies.map(academy => `
                    <div class="schedule-card">
                        <div class="schedule-time">${academy.time}</div>
                        <div class="schedule-academy">${academy.name}</div>
                        <div class="schedule-status">
                            <div class="time-remaining">â° 10ë¶„ ì „ ì•ŒëŒ</div>
                            <span class="badge badge-waiting">ëŒ€ê¸°ì¤‘</span>
                        </div>
                    </div>
                `).join('');
            }
        }

        // UI ì»¨íŠ¸ë¡¤
        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(tab + 'Content').classList.add('active');
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            
            if (modalId === 'addAcademyModal') {
                document.getElementById('academyName').value = '';
                document.getElementById('academyAddress').value = '';
                document.getElementById('startHour').value = '';
                document.getElementById('startMinute').value = '';
                document.getElementById('alarmType').value = 'basic';
                document.querySelectorAll('.day-option').forEach(d => d.classList.remove('selected'));
                document.getElementById('voiceRecordingSection').style.display = 'none';
                document.getElementById('rainAlert').checked = false;
                document.getElementById('dustAlert').checked = false;
                document.getElementById('rainRecordSection').classList.remove('active');
                document.getElementById('dustRecordSection').classList.remove('active');
                recordedAudios = { basic: null, rain: null, dust: null };
            } else if (modalId === 'addRewardModal') {
                document.getElementById('rewardName').value = '';
                document.getElementById('rewardPoints').value = '';
            }
        }

        function toggleDay(element) {
            element.classList.toggle('selected');
        }

        function toggleVoiceRecording() {
            const alarmType = document.getElementById('alarmType').value;
            const voiceSection = document.getElementById('voiceRecordingSection');
            
            if (alarmType === 'voice' || alarmType === 'both') {
                voiceSection.style.display = 'block';
            } else {
                voiceSection.style.display = 'none';
            }
        }

        function toggleWeatherRecording(type) {
            const checkbox = document.getElementById(type + 'Alert');
            const section = document.getElementById(type + 'RecordSection');
            
            if (checkbox.checked) {
                section.classList.add('active');
            } else {
                section.classList.remove('active');
                recordedAudios[type] = null;
                document.getElementById(type + 'PlayBtn').disabled = true;
                document.getElementById(type + 'RecordingStatus').textContent = '';
            }
        }

        async function toggleRecording(type) {
            currentRecordingType = type;
            const recordBtn = document.getElementById(type === 'basic' ? 'recordBtn' : type + 'RecordBtn');
            const status = document.getElementById(type === 'basic' ? 'recordingStatus' : type + 'RecordingStatus');
            
            if (!mediaRecorder || mediaRecorder.state === 'inactive') {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    mediaRecorder = new MediaRecorder(stream);
                    audioChunks = [];

                    mediaRecorder.ondataavailable = (event) => {
                        audioChunks.push(event.data);
                    };

                    mediaRecorder.onstop = () => {
                        const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
                        recordedAudios[type] = URL.createObjectURL(audioBlob);
                        const playBtn = document.getElementById(type === 'basic' ? 'playBtn' : type + 'PlayBtn');
                        playBtn.disabled = false;
                        status.textContent = 'âœ… ë…¹ìŒ ì™„ë£Œ!';
                    };

                    mediaRecorder.start();
                    recordBtn.textContent = 'â¹ï¸ ì¤‘ì§€';
                    status.textContent = 'ğŸ”´ ë…¹ìŒ ì¤‘...';

                    setTimeout(() => {
                        if (mediaRecorder && mediaRecorder.state === 'recording') {
                            mediaRecorder.stop();
                            mediaRecorder.stream.getTracks().forEach(track => track.stop());
                            recordBtn.textContent = 'ğŸ¤ ' + (type === 'basic' ? 'ë…¹ìŒ ì‹œì‘' : 'ë…¹ìŒ');
                        }
                    }, 10000);

                } catch (error) {
                    alert('ë§ˆì´í¬ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤!');
                }
            } else {
                mediaRecorder.stop();
                mediaRecorder.stream.getTracks().forEach(track => track.stop());
                recordBtn.textContent = 'ğŸ¤ ' + (type === 'basic' ? 'ë…¹ìŒ ì‹œì‘' : 'ë…¹ìŒ');
            }
        }

        function playRecording(type) {
            if (recordedAudios[type]) {
                const audio = new Audio(recordedAudios[type]);
                audio.play();
                const status = document.getElementById(type === 'basic' ? 'recordingStatus' : type + 'RecordingStatus');
                status.textContent = 'â–¶ï¸ ì¬ìƒ ì¤‘...';
                audio.onended = () => {
                    status.textContent = 'âœ… ë…¹ìŒ ì™„ë£Œ!';
                };
            }
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    const modalId = this.getAttribute('id');
                    closeModal(modalId);
                }
            });
        });

        // ë“œë¡­ë‹¤ìš´ ì™¸ë¶€ í´ë¦­
        document.addEventListener('click', function(e) {
            const dropdown = document.getElementById('childDropdown');
            const btn = document.querySelector('.child-selector-btn');
            
            if (dropdown && btn && !dropdown.contains(e.target) && !btn.contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });
    
function showMessage(text, type = 'error') {
    const msgBox = document.getElementById('ui-message');
    if (!msgBox) return;
    msgBox.textContent = text;
    msgBox.className = `ui-message ${type}`;
    msgBox.style.display = 'block';
    clearTimeout(msgBox.timer);
    msgBox.timer = setTimeout(() => {
        msgBox.style.display = 'none';
    }, 2000);
}

</script>
<div id="ui-message" class="ui-message" style="display:none;"></div>
</body>
</html>